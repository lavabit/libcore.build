language: c
group: stable
sudo: required
notifications:
  email:
    recipients:
      - make@magmadaemon.com
    on_success: change
    on_failure: change
cache:
  - directories:
    - $HOME/packages/
matrix:
  include:
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: cache
      os: linux
      dist: trusty
      compiler: gcc
      script: true
      before_script: true
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=clang-6.0 FLAGS='-Wno-address-of-packed-member -I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-4.9 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-5 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-6 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-7 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -DMAGMA_PEDANTIC -O3'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O0'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O1'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O2'"
    - stage: run
      os: linux
      dist: trusty
      compiler: gcc
      env: MATRIX_EVAL="COMPILER=gcc-8 FLAGS='-I/usr/include/ -UMAGMA_PEDANTIC -O3'"
before_install:
  - eval "${MATRIX_EVAL}"
install:
  - printf 'Acquire::Retries "10";\n' | sudo tee --append /etc/apt/apt.conf.d/99custom
  - printf 'Acquire::http::Timeout "120";\n' | sudo tee --append /etc/apt/apt.conf.d/99custom
  - printf 'Acquire::https::Timeout "120";\n' | sudo tee --append /etc/apt/apt.conf.d/99custom
  - printf 'Acquire::http::No-Cache "true";\n' | sudo tee --append /etc/apt/apt.conf.d/99custom
  - printf 'Acquire::https::No-Cache "true";\n' | sudo tee --append /etc/apt/apt.conf.d/99custom
  - sudo -E apt-add-repository -y "ppa:ubuntu-toolchain-r/test"
  - sudo -E sed -i -e '/repo.mongodb.org/d' /etc/apt/sources.list /etc/apt/sources.list.d/*
  - sudo -E sed -i -e '/ppa.launchpad.net\/couchdb/d' /etc/apt/sources.list /etc/apt/sources.list.d/*
  - sudo -E sed -i -e '/packagecloud.io\/github\/git-lfs/d' /etc/apt/sources.list /etc/apt/sources.list.d/*
  - curl -sSL "https://build.travis-ci.org/files/gpg/llvm-toolchain-`lsb_release -c -s`-6.0.asc" | sudo -E apt-key add -
  - echo "deb https://apt.llvm.org/`lsb_release -c -s`/ llvm-toolchain-`lsb_release -c -s`-6.0 main" | sudo tee -a ${TRAVIS_ROOT}/etc/apt/sources.list >/dev/null
  - if [ -d $HOME/packages ]; then find $HOME/packages -maxdepth 1 -type f -name "*.deb" -exec sudo cp {} /var/cache/apt/archives/ \; ; fi
  - if [ ! -d $HOME/packages ]; then mkdir $HOME/packages; fi
  - (travis_retry sudo apt-get update && travis_retry sudo -E apt-get -yq --no-install-suggests --no-install-recommends install autoconf automake bison build-essential check cmake curl flex gdb git gnupg ibc++-dev inotify-tools libarchive13 libbsd-dev libc6-dev libmpfr4 libmpfr-dev libncurses5-dev libpython2.7 libsubunit0 libsubunit-dev libtool make patch pciutils pkg-config postfix sysstat usbutils valgrind valgrind-dbg gcc-4.8 g++-4.8 gcc-4.8-locales gcc-4.8-multilib g++-4.8-multilib libstdc++-4.8-dev gcc-4.9 g++-4.9 gcc-4.9-locales gcc-4.9-multilib g++-4.9-multilib libstdc++-4.9-dev gcc-5 g++-5 gcc-5-locales gcc-5-multilib g++-5-multilib libstdc++-5-dev gcc-6 g++-6 gcc-6-locales gcc-6-multilib g++-6-multilib libstdc++-6-dev gcc-7 g++-7 gcc-7-locales gcc-7-multilib g++-7-multilib libstdc++-7-dev gcc-8 g++-8 gcc-8-locales gcc-8-multilib g++-8-multilib libstdc++-8-dev clang-6.0 llvm-6.0-dev) || (sleep 120; travis_retry sudo apt-get update && travis_retry sudo -E apt-get -yq --no-install-suggests --no-install-recommends install autoconf automake bison build-essential check cmake curl flex gdb git gnupg ibc++-dev inotify-tools libarchive13 libbsd-dev libc6-dev libmpfr4 libmpfr-dev libncurses5-dev libpython2.7 libsubunit0 libsubunit-dev libtool make patch pciutils pkg-config postfix sysstat usbutils valgrind valgrind-dbg gcc-4.8 g++-4.8 gcc-4.8-locales gcc-4.8-multilib g++-4.8-multilib libstdc++-4.8-dev gcc-4.9 g++-4.9 gcc-4.9-locales gcc-4.9-multilib g++-4.9-multilib libstdc++-4.9-dev gcc-5 g++-5 gcc-5-locales gcc-5-multilib g++-5-multilib libstdc++-5-dev gcc-6 g++-6 gcc-6-locales gcc-6-multilib g++-6-multilib libstdc++-6-dev gcc-7 g++-7 gcc-7-locales gcc-7-multilib g++-7-multilib libstdc++-7-dev gcc-8 g++-8 gcc-8-locales gcc-8-multilib g++-8-multilib libstdc++-8-dev clang-6.0 llvm-6.0-dev)
  - (find /var/cache/apt/archives/ -maxdepth 1 -type f -name "*.deb" -exec cp {} $HOME/packages/ \;)
before_script:
  - cd $HOME && curl --location --output util-linux-2.25.2.tar.gz https://www.kernel.org/pub/linux/utils/util-linux/v2.25/util-linux-2.25.2.tar.gz
  - tar xzf util-linux-2.25.2.tar.gz && cd util-linux-2.25.2
  - ./configure ADJTIME_PATH=/var/lib/hwclock/adjtime --disable-chfn-chsh --disable-login --disable-nologin --disable-su --disable-setpriv --disable-runuser --disable-pylibmount --disable-static --without-python --without-systemd --without-systemdsystemunitdir --without-ncurses
  - make prlimit && install --verbose --directory $HOME/bin/ && install --verbose --mode=755 prlimit $HOME/bin/prlimit && cd $TRAVIS_BUILD_DIR
script:
  - export HASH=`git show  --quiet | grep commit | awk -F' ' '{print $2}'`
  - git remote add upstream https://github.com/lavabit/libcore.git
  - git fetch upstream
  - git reset --hard upstream/develop
  - git checkout $HASH -- .travis.yml
  - sudo renice --priority -10 $$
  - sudo sysctl --quiet --write vm.swappiness=5
  - sudo -E $HOME/bin/prlimit --pid "$$" --stack=unlimited:unlimited;
  - sudo -E $HOME/bin/prlimit --pid "$$" --memlock=unlimited:unlimited;
  - mkdir .tmp/ && chmod 766 .tmp/ && mkdir .tmp/data/ && chmod 766 .tmp/data/
  - mkdir /tmp/magma/ && chmod 766 /tmp/magma/ && mkdir /tmp/magma/data/ && chmod 766 /tmp/magma/data/
  - CC="$COMPILER" CFLAGS="$FLAGS" make --keep-going --jobs=4 libcore.a
  - CC="$COMPILER" CFLAGS="$FLAGS" make --keep-going --jobs=4 libcore.so
  - CC="$COMPILER" CFLAGS="$FLAGS" make --keep-going --jobs=4 core.check
  - $TRAVIS_BUILD_DIR/core.check
  - valgrind --tool=memcheck --log-fd=1 --trace-children=yes --child-silent-after-fork=yes --run-libc-freeres=yes --demangle=yes --num-callers=50 --error-limit=no --show-below-main=no --undef-value-errors=yes --track-origins=yes --track-fds=yes --read-var-info=yes --smc-check=none --fullpath-after= --leak-check=yes --show-reachable=yes --leak-resolution=high --workaround-gcc296-bugs=no --partial-loads-ok=yes --track-fds=yes $TRAVIS_BUILD_DIR/core.check
